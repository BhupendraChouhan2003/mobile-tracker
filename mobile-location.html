<!DOCTYPE html>
<html>
  <head>
    <title>Mobile Location Sender</title>
  </head>
  <body>
    <h2>Send Mobile Location to Server</h2>
    <button onclick="startTracking()">Start Tracking</button>
    <script>
      function sendLocation(lat, lng) {
        fetch("https://3217d8f10320.ngrok-free.app/update-location", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ latitude: lat, longitude: lng }),
        });
      }

      function startTracking() {
        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(
            function (pos) {
              let lat = pos.coords.latitude;
              let lng = pos.coords.longitude;
              sendLocation(lat, lng);
              // For user feedback [Optional]:
              document.body.insertAdjacentHTML(
                "beforeend",
                `<div>Sent location: ${lat}, ${lng}</div>`
              );
            },
            function (err) {
              alert(
                "Cannot get location: " +
                  err.message +
                  "\n\n1. Make sure GPS/location is enabled.\n2. Move outdoors for better signal.\n3. Increase allowed location time in device settings."
              );
            },
            { enableHighAccuracy: true, maximumAge: 5000, timeout: 20000 }
          );
        } else {
          alert("Geolocation is not supported on this device.");
        }
      }
    </script>
  </body>
</html>


