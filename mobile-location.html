<!DOCTYPE html>
<html>
  <head>
    <title>Mobile Location Sender</title>
  </head>
  <body>
    <h2>Send Mobile Location to Server</h2>
    <button onclick="startTracking()">Start Tracking</button>
    <script>
      function sendLocation(lat, lng) {
        fetch("https://3217d8f10320.ngrok-free.app/update-location", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ latitude: lat, longitude: lng }),
        });
      }

      function startTracking() {
        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(
            function (pos) {
              let lat = pos.coords.latitude;
              let lng = pos.coords.longitude;
              sendLocation(lat, lng);
            },
            function (err) {
              alert("Cannot get location: " + err.message);
            },
            { enableHighAccuracy: true, maximumAge: 5000, timeout: 10000 }
          );
        } else {
          alert("Geolocation is not supported on this device.");
        }
      }
    </script>
  </body>
</html>
